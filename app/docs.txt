RAGは、プロンプトと呼ばれるLLMへの入力情報にモデル外部の情報源からの検索結果を付加して、検索結果に基づいた回答をさせています。モデルはプロンプトに含まれているリファレンス情報をもとにユーザからの要望に回答すればいいので、知識にないことであっても正確に答えられるようになるのではないかという発想です。
HNSWはグラフ探索型のアルゴリズムでベクトル距離に応じて事前にグラフを構築しておきます。探索は高速だが、事前に構築したグラフの読み込みに時間がかかるという特性があります。また、圧縮せずに生データをそのままメモリ上に展開して処理をするので、メモリの消費量が大きくなります。2020年にGoogleがScaNNというより高速で高精度・高効率なアルゴリズムを提唱しましたが、2018年時点ではmillion-scaleのドキュメントの近似近傍探索では決定版と言われていたアルゴリズムです。
根幹となる文のポジティブ/ネガティブ判定を実装していきます。文のポジネガ判定の方法もいろいろあると思いますが、今回は単語ごとの印象(極性)を分析していく極性分析を行うことにします。単語ごとの極性をまとめた極性辞書は、東京工業大学精密工学研究所高村研究室が公開している単語感情極性対応表を使いました。表の中身は単語ごとに-1~1までの極性値が載っています。これに文を単語分割したものを渡してポジネガ値を計算することにします。
